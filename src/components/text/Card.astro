---
import { twJoin } from 'tailwind-merge'

type Props = {
  href: string
  external?: boolean
  text?: string
  alt?: string | undefined
  imageSrc?: string | undefined
  variant: 'iconGrid' | 'iconImageGrid'
}

const { href, external, text, alt, imageSrc, variant } = Astro.props
---

<a
  href={href}
  class="flex grow flex-col items-center justify-center rounded bg-gray-100 hover:bg-green-100"
  title={alt}
  target={external ? '_blank' : undefined}
>
  {
    imageSrc ? (
      <img
        src={imageSrc}
        class="m-0 max-h-40 w-full overflow-clip rounded-t border border-gray-100 object-cover"
      />
    ) : (
      <div
        class={twJoin(
          variant === 'iconImageGrid' ? 'h-40 w-full border-b border-gray-50' : 'pb-2 pt-5',
          'm-0 flex items-center justify-center',
        )}
      >
        <slot />
      </div>
    )
  }
  <h2 class="justify-left not-prose mb-3 mt-1 flex items-center gap-1 py-0">
    {text ? text : 'Mehr erfahrenâ€¦'}
    {
      external ? (
        <>
          {/* arrow-top-right-on-square */}
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 20 20"
            fill="currentColor"
            class="size-5"
          >
            <path
              fill-rule="evenodd"
              d="M4.25 5.5a.75.75 0 0 0-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 0 0 .75-.75v-4a.75.75 0 0 1 1.5 0v4A2.25 2.25 0 0 1 12.75 17h-8.5A2.25 2.25 0 0 1 2 14.75v-8.5A2.25 2.25 0 0 1 4.25 4h5a.75.75 0 0 1 0 1.5h-5Z"
              clip-rule="evenodd"
            />
            <path
              fill-rule="evenodd"
              d="M6.194 12.753a.75.75 0 0 0 1.06.053L16.5 4.44v2.81a.75.75 0 0 0 1.5 0v-4.5a.75.75 0 0 0-.75-.75h-4.5a.75.75 0 0 0 0 1.5h2.553l-9.056 8.194a.75.75 0 0 0-.053 1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </>
      ) : (
        ''
      )
    }
  </h2>
</a>
